##Подготовительная часть ~ 1 день
###0 - Описание
Создание собственного тестового мини-фреймворка для ускорения процесса внедрения в команду

В качестве IDE (среды для разработки) настоятельно рекомендуется использовать PyCharm. В примерах будут упоминаться 
некоторые настройки, ориентированные только на PyCharm

Все этапы обозначены **максимальным** количеством времени, которое можно на них потратить 
(это не соревнование на время и ни на что не влияет, но укладываться в рамки желательно - так будет больше времени на 
разбор более важных вопросов и другие задачи)

Если какой-то этап занимает больше времени, чем указано - не стесняйся задавать вопросы

Использование гугла поощряется на всех этапах

###1 - Виртуальное окружение - 30 минут
Создай проект и виртуальное окружение (venv) и активируй его

Сделать это можно двумя способами:
1. через терминал (гугл)
2. через встроенные средства PyCharm:

    `File -> Settings -> Python Interpreter -> Settings (шестеренка) -> Add -> Virtualenv Environment`

   Выбрать `New environment` и убрать все сопутствующие галочки 

    Активация произойдет автоматически

###2 - Установка зависимостей - 15 минут
Зависимости можно установить двумя способами:

* через терминал с помощью ввода команды **pip install _packagename_**
* через встроенные средства PyCharm: `File -> Settings -> Python Interpreter` (type into search field)

Зависимости, которые нужно установить:
* pytest
* selenium
* allure-pytest

###3 - ChromeDriver - 15 минут
[Скачай ChromeDriver](https://chromedriver.chromium.org/), соответствующий твоей версии браузера, и положи его 
в `conf` (создай такую директорию)

###4 - Запуск теста - 15 минут
Введи в терминале `pytest tests/test_open_result.py::test_click_first_result` и убедись, что все работает

###5 - Разбор тестов - 5 часов
Постарайся понять структуру фреймворка и разобрать все используемые классы и методы

Все вопросы запиши - будем обсуждать

##Практическая часть ~ 2 дня
###6 - Рефакторинг метода `fill_search_field` - 20 минут
Текст "Page Object Model" для поиска вшит в `fill_search_field`. Измени этот метод таким образом, чтобы он принимал 
любой текст и искал его

    Сделай commit & push всех изменений в репозиторий

###7 - Создание теста - 4 часа
Шаги теста:
1. Ввести в поисковой строке запрос "собака" и нажать Enter
2. Открыть вкладку "Переводчик"
3. Нажать под вкладкой "Примеры использования" на кнопку "dog"
4. Получить текст всех примеров
5. Убедиться, что в каждом приведенном примере есть слово "dog" (используй assert)

#### Создай тест - 3 часа
Примерный алгоритм:
* Создай в папке tests файл `test_open_translator.py`
* Создай тестовый метод `test_get_examples`
* Реализуй все необходимые файлы, классы и методы для страниц, которые будут использоваться в тесте
* Вызови созданные методы из тестовой функции `test_get_examples` в файле `test_open_translator.py` 


      Возникнет проблема - элемент не найдется на странице даже при правильно построенном локаторе. 
      Причина кроется в том, что вкладка "Переводчик" открывается в новом окне, а экземпляр драйвера настроен на 
      страницу с поисковыми результатами (потому что она была открыта первой)

#### Реализуй переключение на другую вкладку - 1 час
После реализации переключения на нужную вкладку, запусти тест и убедись, что он проходит успешно


    Сделай commit & push всех изменений в репозиторий
    Напиши тимлиду для обсуждения написанного теста

###8 - Параметризация теста test_get_translate - 1 час
Информация о `pytest.parametrize` есть в документации pytest`а

В текущем задании нужно параметризировать тест следующими значениями:
* значение, используемое в качестве текста запроса в поисковой строке 
* значение, которое ожидается получить в каждом примере после нажатия на соответствующую кнопку

Значения для параметризации теста:
* "помидор" (ожидается "tomato")
* "книга" (ожидается "book")
* "conftest" (ожидается "конфтест")
* "banana" (ожидается "банан")

    
    Сделай commit & push всех изменений в репозиторий

###9 - Работа с исключениями - 2 часа
####9.1 Отлавливание исключений - 30 минут
Отлови исключение NoSuchElementException, которое выбрасывается в одном из параметризированных значений

####9.2 Стратегия обработки исключения - 30 минут 
Подумай, как можно обработать пойманное исключение (изучи конструкцию try/except, если не знаком с ней)

####9.3 Обработка исключения - 1 час
Обработай пойманное исключение

    Сделай commit & push всех изменений в репозиторий

###10 - Фикстуры и yield - 3 часа
Прочитай документацию про фикстуры и yield в pytest

В данном задании представь, что тебе нужно залогиниться на сайте Яндекса перед тем, как выполнить тесты:
1. Предположим, что ты ввел данные для авторизации и нажал на кнопку "Войти"
2. Ты получил некий токен, который будет использоваться во время сессии (пока не произошел выход из аккаунта)
3. Как только произошел выход из аккаунта, токен уничтожается

####10.1 - scope='function' (по умолчанию)
* В файле `test_open_result.py` прокинь во все тестовые функции фикстуру login 
(аналогично фикстуре driver - просто пропиши ее следующим параметром в методе)
* Запусти тесты из файла `test_open_result.py` с отображением print'ов (за это отвечает параметр "-s") командой 
`pytest tests/test_open_result.py -s`
* Изучи поведение фикстуры
* Проследи, в какой момент token создается, а в какой - уничтожается


    Сделай commit & push всех изменений в репозиторий

####10.2 - scope='class'
* Прочитай про `scope` у фикстур - что это и для чего он нужен
* Засунь оба метода в файле `test_open_result.py` внутрь класса с названием TestOpen. 
Не забудь в начало методов вставить аргумент "self"
* Пропиши у фикстуры login (она находится в файле conftest.py) scope=class
* Запусти тесты из файла `test_open_result.py` с отображением print'ов (за это отвечает параметр "-s") командой 
`pytest tests/test_open_result.py -s`
* Проанализируй поведение фикстуры в этом примере


    Сделай commit & push всех изменений в репозиторий

####10.3 - scope='function' vs scope='class'
Свяжись с тимлидом и расскажи ему про разницу между двумя скопами

###11 - Conftest.py - 2 часа
Прочитай документацию о conftest.py и подготовь рассказ о том, зачем нужен этот файл и какое место он занимает в 
иерархии тестов, запускаемых под управлением pytest 

###12 - Allure - 2 часа
####12.1 - Знакомство с Allure - 1 час
* Запусти тесты с командой `pytest tests/test_open_result.py --alluredir allure-results`
* По окончании тестов запусти команду `allure serve allure-results` 
(если эта команда вызывает ошибку - обратись к тимлиду)
* Ознакомься с полученным отчетом
* Ознакомься с [документацией](https://docs.qameta.io/allure/)
* Изучи информацию о том, как расставлять тестовые шаги (`with allure.step`, `@allure.step` и `allure.step`)

####12.2 - Практика с Allure - 1 час
* В тестовом методе `test_click_first_result` сделай скриншот вкладки, открытой после нажатия на поисковый результат
* Прикрепи сделанный скриншот к отчету
* Убедись, что после запуска теста скриншот прикрепился
